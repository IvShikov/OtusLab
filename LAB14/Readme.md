# Лабораторная работа №14. Настройка протоколов CDP, LLDP и NTP
## Топология
![image](https://github.com/user-attachments/assets/30be7b8a-d813-4d77-96fe-ced3008dac09)
## Таблица адресации
![](https://github.com/IvShikov/OtusLab/blob/main/LAB14/Lab14_Addressing%20table.JPG)

# Задачи:
## Часть 1. Создание и настройка основных параметров устройства
## Часть 2. Обнаружение сетевых ресурсов с помощью протокола CDP
## Часть 3. Обнаружение сетевых ресурсов с помощью протокола LLDP
## Часть 4. Настройка и проверка NTP

# Общие сведения и сценарий
**Протокол Cisco Discovery Protocol (CDP)** — собственный протокол Cisco для обнаружения сетевых ресурсов, функционирующий на канальном уровне. Он служит для обмена информацией, например именами устройств и версиями ПО IOS, с другими физически подключенными устройствами Cisco. 

**Протокол Link Layer Discovery Protocol (LLDP)** — это не зависящий от производителя протокол для обнаружения сетевых ресурсов, функционирующий на канальном уровне. В основном он используется сетевыми устройствами в локальной сети (LAN). Сетевые устройства сообщают соседям такие данные о себе, как идентификаторы и сведения о функциональных возможностях.

**Протокол сетевого времени (NTP)** служит для синхронизации времени между распределенными серверами времени и клиентами. В качестве **транспортного протокола** NTP использует **протокол UDP**. Все операции обмена данными по протоколу NTP выполняются по времени в формате UTC. Сервер NTP обычно получает данные о времени из достоверного источника, такого как атомные часы, к которым подключен сервер. Затем он распределяет это время по сети. Протокол NTP чрезвычайно эффективен: для синхронизации времени на двух компьютерах с временной разницей в пределах миллисекунды требуется отправлять не более одного пакета в минуту.

В этой лабораторной работе нам предстоит задокументировать порты, которые используются для подключения к другим коммутаторам по протоколам CDP и LLDP. Полученные результаты следует указать в диаграмме сетевой топологии. 

**Примечание:** Маршрутизаторы, используемые в практических лабораторных работах CCNA, - это Cisco 4221 с Cisco IOS XE Release 16.9.4 (образ universalk9). В лабораторных работах используются коммутаторы Cisco Catalyst 2960 с Cisco IOS версии 15.2(2) (образ lanbasek9). Можно использовать другие маршрутизаторы, коммутаторы и версии Cisco IOS. В зависимости от модели устройства и версии Cisco IOS доступные команды и результаты их выполнения могут отличаться от тех, которые показаны в лабораторных работах. Правильные идентификаторы интерфейса см. в сводной таблице по интерфейсам маршрутизаторов в конце лабораторной работы.

**Примечание:** Следует убедиться, что у всех маршрутизаторов и коммутаторов была удалена начальная конфигурация. 

# Необходимые ресурсы:
 - 1 маршрутизатор (Cisco 4221 с универсальным образом Cisco IOS XE версии 16.9.4 или аналогичным);
 - 2 коммутатора (Cisco 2960 с образом lanbasek9 Cisco IOS версии 15.2 (2) или аналогичным);
 - 1 ПК (ОС Windows с программой эмуляции терминалов, такой как Cisco Packet Tracer);
 - Консольные кабели для настройки устройств Cisco IOS через консольные порты;
 - Кабели Ethernet, расположенные в соответствии с топологией.

##
## Часть 1. Создание сети и настройка основных параметров устройства
В первой части лабораторной работы нам предстоит создать топологию сети и настроить основные параметры для маршрутизатора и коммутаторов.
### Шаг 1. Создание сети согласно топологии.
Подключили устройства, как показано в топологии, и подсоединили необходимые кабели.
### Шаг 1. Настройка базовых параметров маршрутизатора.
 - Назначение маршрутизатору имени устройства.
 - Отключение поиска DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введённые команды таким образом, как будто они являются именами узлов. 
 - Назначение **class** в качестве зашифрованного пароля привилегированного режима EXEC.
 - Назначение **cisco** в качестве пароля консоли и включение входа в систему по паролю.
 - Назначение **cisco** в качестве пароля VTY и включение входа в систему по паролю.
 - Шифрование открытых паролей.
 - Создание баннера с предупреждением о запрете несанкционированного доступа к устройству.
 - Сохранение текущей конфигурации в файл загрузочной конфигурации.

   ![](https://github.com/IvShikov/OtusLab/blob/main/LAB14/Lab14_R1_basic%20settings.JPG)
   
### Шаг 3. Настройка базовых параметров каждого коммутатора.
 - Назначение коммутатору имени устройства.
 - Отключение поиска DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введённые команды таким образом, как будто они являются именами узлов. 
 - Назначение **class** в качестве зашифрованного пароля привилегированного режима EXEC.
 - Назначение **cisco** в качестве пароля консоли и включите вход в систему по паролю.
 - Назначение **cisco** в качестве пароля VTY и включение входа в систему по паролю.
 - Шифрование открытых паролей.
 - Создание баннера с предупреждением о запрете несанкционированного доступа к устройству.
 - Сохранение текущей конфигурации в файл загрузочной конфигурации.

   ![](https://github.com/IvShikov/OtusLab/blob/main/LAB14/Lab14_Switches%20basic%20settings.JPG)

##
## Часть 2. Обнаружение сетевых ресурсов с помощью протокола CDP
На устройствах Cisco протокол CDP включен по умолчанию. Нужно воспользоваться CDP, чтобы обнаружить порты, к которым подключены кабели.
 - Открыли окно конфигурации
 - На R1 использовали команду **show cdp**, чтобы определить, сколько интерфейсов включено CDP, сколько из них включено и сколько отключено.

 ![]()
 
**Вопрос:** Сколько интерфейсов участвует в объявлениях CDP? Какие из них активны?

 - На R1 использовали команду **show cdp entry S1**, чтобы определить версию IOS, используемую на S1.

 ![]()
 
**Вопрос:** Какая версия IOS используется на  S1?

 - На S1 использовали команду **show cdp traffic**, чтобы определить, сколько пакетов CDP было выданных.

 ![]()
 
**Вопрос:** Сколько пакетов имеет выход CDP с момента последнего сброса счётчика?

 ![]()
 
 - Настроили SVI для VLAN 1 на S1 и S2, используя IP-адреса, указанные в таблице адресации выше. Настроили шлюз по умолчанию для каждого коммутатора на основе таблицы адресов.

 ![]()
 
 - На R1 выполнили команду **show cdp entry S1**.

 ![]()

**Вопрос:** Какие дополнительные сведения доступны теперь?

 - Отключили CDP глобально на всех устройствах. 

 ![]() 

##
## Часть 3. Обнаружение сетевых ресурсов с помощью протокола LLDP
На устройствах Cisco протокол LLDP может быть включен по умолчанию. Следует воспользоваться LLDP, чтобы обнаружить порты, к которым подключены кабели.
 - Открыли окно конфигурации
 - Ввели команду **lldp**, чтобы включить LLDP на всех устройствах в топологии.
 - На S1 выполнили команду **show lldp entry S2**, чтобы предоставить подробную информацию об S2. 
 
 ![]()
 
**Вопрос:** Что такое chassis ID  для коммутатора S2?

 - Закрыли окно настройки.
 - Соединились через консоль на всех устройствах и использовали команды LLDP, необходимые для отображения топологии физической сети только из выходных данных команды **show**.

![]()

## 
## Часть 4. Настройка NTP
В части 4 необходимо настроить маршрутизатор R1 в качестве сервера NTP, а маршрутизатор R2 в качестве клиента NTP маршрутизатора R1. Необходимо выполнить синхронизацию времени для Syslog и отладочных функций. Если время не синхронизировано, сложно определить, какое сетевое событие стало причиной данного сообщения.
### Шаг 1. Вывод на экран текущего времени.
 - Открыли окно конфигурации
 - Ввели команду **show clock** для отображения текущего времени на R1. Записали отображаемые сведения о текущем времени в следующей таблице.

![]()

### Шаг 2. Установка времени.
С помощью команды **clock set** установили время на маршрутизаторе R1. Введённое время должно быть в формате UTC. 
 
### Шаг 3. Настройка главного сервера NTP.
Настроили R1 в качестве хозяина NTP с уровнем слоя 4.

![]()
 
### Шаг 4. Настройка клиента NTP.
Выполнили команду на S1 и S2, чтобы просмотреть настроенное время. Записали текущее время в следующей таблице.

![]()

 - Настроили S1 и S2 в качестве клиентов NTP. Использовали соответствующие команды NTP для получения времени от интерфейса G0/0/1 R1, а также - для периодического обновления календаря или аппаратных часов коммутатора.

![]()

### Шаг 5. Проверка настройки NTP.
 - Использовали команду **show**, чтобы убедиться, что S1 и S2 синхронизированы с R1.

**Примечание:** Синхронизация метки времени на маршрутизаторе R2 с меткой времени на маршрутизаторе R1 может занять несколько минут.

![]()

 - Выполнили соответствующую команду на S1 и S2, чтобы просмотреть настроенное время и сравнить ранее записанное время.

![]()

**Вопрос для повторения:** Для каких интерфейсов в пределах сети не следует использовать протоколы обнаружения сетевых ресурсов? 

## Сводная таблица по интерфейсам маршрутизаторов
 ![](https://github.com/IvShikov/OtusLab/blob/main/LAB14/Lab14_Routing%20table%20general.JPG)

**Примечание:** Чтобы определить конфигурацию маршрутизатора, можно посмотреть на интерфейсы и установить тип маршрутизатора и количество его интерфейсов. Перечислить все комбинации конфигураций для каждого класса маршрутизаторов невозможно. Эта таблица содержит идентификаторы для возможных комбинаций интерфейсов Ethernet и последовательных интерфейсов на устройстве. Другие типы интерфейсов в таблице не представлены, хотя они могут присутствовать в данном конкретном маршрутизаторе. В качестве примера можно привести интерфейс ISDN BRI. Строка в скобках — это официальное сокращение, которое можно использовать в командах Cisco IOS для обозначения интерфейса.

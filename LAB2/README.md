# Лабораторная работа №2. Просмотр таблицы MAC-адресов коммутатора

![Lab2_1](https://github.com/IvShikov/OtusLab/assets/165417029/9381da10-834a-4fb2-ac15-2bbbcc400b94)


# Цели:
## Часть 1. Создание и настройка сети
## Часть 2. Изучение таблицы МАС-адресов коммутатора
# Необходимые ресурсы:
 - 2 коммутатора (Cisco 2960 с операционной системой Cisco IOS 15.2(2) (образ lanbasek9) или аналогичная модель);
 - 2 ПК (Windows и программа эмуляции терминала);
 - консольные кабели для настройки устройств Cisco IOS через консольные порты;
 - кабели Ethernet, расположенные в соответствии с топологией.
 #### Примечание. Интерфейсы Fast Ethernet на коммутаторах Cisco 2960 определяют тип подключения автоматически, поэтому между коммутаторами S1 и S2 можно использовать прямой кабель Ethernet. При использовании коммутатора Cisco другой модели может потребоваться перекрестный кабель Ethernet.
 #
## Часть 1. Создание и настройка сети
### Шаг 1. Подключение сети в соответствии с топологией.
### Шаг 2. Настройка узлов ПК.
### Шаг 3. Выполнение инициализации и перезагрузки коммутаторов.
### Шаг 4. Настройка базовых параметров каждого коммутатора.
Открыли окно конфигурации
 - a. Настроили имена устройств в соответствии с топологией.
 - b. Настроили IP-адреса согласно таблице адресации.
 - c. Назначили cisco в качестве паролей консоли и VTY.
 - d. Назначили class в качестве пароля доступа к привилегированному режиму EXEC.
Закрыли окно настройки.
#
## Часть 2. Изучение таблицы МАС-адресов коммутатора
Как только между сетевыми устройствами начинается передача данных, коммутатор выясняет МАС-адреса и строит таблицу.
### Шаг 1. Запись МАС-адресов сетевых устройств
 - a. Открыли командную строку на PC-A и PC-B и ввели команду ipconfig /all. Получили следующие физические адреса адаптера Ethernet:
#### MAC-адрес компьютера PC-A: 0030.F253.9401
![Lab2_IPconfigPCA](https://github.com/IvShikov/OtusLab/assets/165417029/a9302103-1037-4976-b55a-8f67e683aaa3)

#### MAC-адрес компьютера PC-B: 0001.C950.C8BA
![Lab2_IPConfigPCB](https://github.com/IvShikov/OtusLab/assets/165417029/17f96670-a592-4f00-86cf-33bee69093e2)

Закрыли окно командной строки.
 - b. Подключились к коммутаторам S1 и S2 через консоль и ввели команду show interface F0/1 на каждом коммутаторе. Открыли окно конфигурации и нашли адреса оборудования во второй строке выходных данных команды (или зашитый адрес — bia):
#### МАС-адрес коммутатора S1 Fast Ethernet 0/1: 0005.5e12.4801
![Lab2_12](https://github.com/IvShikov/OtusLab/assets/165417029/bb726f0a-b256-42ee-afca-8ea9cd9fd26c)

#### МАС-адрес коммутатора S2 Fast Ethernet 0/1: 000d.bd85.9001 
![Lab2_13](https://github.com/IvShikov/OtusLab/assets/165417029/37bcac5e-d963-4f5c-a75e-8f8fb0626765)

Закрыли окно командной строки.
### Шаг 2. Просмотр таблицы МАС-адресов коммутатора
#### Подключились к коммутатору S2 через консоль и просмотрели таблицу МАС-адресов до и после тестирования сетевой связи с помощью эхо-запросов.
 - a. Подключились к коммутатору S2 через консоль и вошли в привилегированный режим EXEC. Открыли окно конфигурации
 - b. В привилегированном режиме EXEC ввели команду show mac address-table и нажали клавишу ввода. Даже если сетевая коммуникация в сети не происходила (т. е. если команда ping не отправлялась), коммутатор может узнать МАС-адреса при подключении к ПК и другим коммутаторам.
#### В таблице МАС-адресов записан только МАС-адрес 0005.5e12.4801 коммутатора S1. Он сопоставлен с портом Fa0/1 коммутатора S2. 

![Lab2_Step2_MAConS2](https://github.com/IvShikov/OtusLab/assets/165417029/ae67a82c-b76f-46a8-a3ba-4679e8dd7039)

Таким образом, если не записаны МАС-адреса сетевых устройств в шаге 1, то при помощи команды show mac address-table можно определить, каким устройствам принадлежат МАС-адреса, используя только выходные данные команды show mac address-table. Это решение работает только, если к порту не подключено несколько устройств (или к порту коммутатора не подключен другой коммутатор, к которому подключены другие устройства).

### Шаг 3. Очистка таблицы МАС-адресов коммутатора S2 и повторное отображение таблицы МАС-адресов
 - a. В привилегированном режиме EXEC ввели команду clear mac address-table dynamic и нажали клавишу Enter.
 - b. Снова быстро ввели команду show mac address-table.
В таблице МАС-адресов не указаны никакие МАС-адреса. 
- c. Через 10 секунд ввели команду show mac address-table и нажали клавишу ввода. В таблице МАС-адресов не появились новые адреса. В таблице МАС-адресов появились новые адреса только по прошествии бОльшего промежутка времени.

![Lab2_Step3_ClearMACS2](https://github.com/IvShikov/OtusLab/assets/165417029/291d05d5-e979-4cd7-ab7e-c994ad2c1e54)

### Шаг 4. С компьютера PC-B отправили эхо-запросы устройствам в сети и просмотрели таблицу МАС-адресов коммутатора.
 - a. На компьютере PC-B открыли командную строку и снова ввели команду arp -a. Не считая адресов многоадресной и широковещательной рассылки, 0 пар IP- и МАС-адресов устройств было получено через протокол ARP.

![Lab2_ARP_PCB](https://github.com/IvShikov/OtusLab/assets/165417029/5c329dbc-386c-44c1-9843-c4d7953cf476)

 - b. Из командной строки PC-B отправили эхо-запросы на компьютер PC-A, а также - коммутаторы S1 и S2. Были получены ответы от всех устройств.

![Lab2_Step4_PingfPCB](https://github.com/IvShikov/OtusLab/assets/165417029/4150a8df-1c00-4ef8-ae5a-b46cfef35ef1)

Закрыли командную строку.
 - c. Подключившись через консоль к коммутатору S2, ввели команду show mac address-table.
#### Открыли окно конфигурации. Коммутатор добавил в таблицу МАС-адресов дополнительные МАС-адреса.

![Lab2_Step4_MACs2](https://github.com/IvShikov/OtusLab/assets/165417029/54b903f9-ef12-4298-a187-cf707ddf65f1)

На компьютере PC-B открыли командную строку и снова ввели команду arp -a. В ARP-кэше компьютера PC-B появились дополнительные записи (с IP и МАС-адресами) для всех сетевых устройств, которым были отправлены эхо-запросы .

![Lab2_Step4_ARPPCB2](https://github.com/IvShikov/OtusLab/assets/165417029/1d566a48-b64b-4fb7-a1f4-a856c13475aa)

Закрыли командную строку.

Таким образом, в сетях Ethernet данные передаются на устройства по соответствующим МАС-адресам. Для этого коммутаторы и компьютеры динамически создают ARP-кэш и таблицы МАС-адресов. Если компьютеров в сети немного, эта процедура выглядит достаточно простой. Но в крупных сетях может возникнуть широковещательный шторм, потому что таблицы ARP и МАС-адресов не проверяют и не аутентифицируют IP-адреса других систем других пользователей. 

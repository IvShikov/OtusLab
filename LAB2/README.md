# Лабораторная работа №2. Просмотр таблицы MAC-адресов коммутатора
# Цели:
## Часть 1. Создание и настройка сети
## Часть 2. Изучение таблицы МАС-адресов коммутатора
# Необходимые ресурсы:
 - 2 коммутатора (Cisco 2960 с операционной системой Cisco IOS 15.2(2) (образ lanbasek9) или аналогичная модель);
 - 2 ПК (Windows и программа эмуляции терминала);
 - консольные кабели для настройки устройств Cisco IOS через консольные порты;
 - кабели Ethernet, расположенные в соответствии с топологией.
 #### Примечание. Интерфейсы Fast Ethernet на коммутаторах Cisco 2960 определяют тип подключения автоматически, поэтому между коммутаторами S1 и S2 можно использовать прямой кабель Ethernet. При использовании коммутатора Cisco другой модели может потребоваться перекрестный кабель Ethernet.
 #
## Часть 1. Создание и настройка сети
### Шаг 1. Подключение сети в соответствии с топологией.
### Шаг 2. Настройка узлов ПК.
### Шаг 3. Выполнение инициализации и перезагрузки коммутаторов.
### Шаг 4. Настройка базовых параметров каждого коммутатора.
Открыли окно конфигурации
 - a. Настроили имена устройств в соответствии с топологией.
 - b. Настроили IP-адреса согласно таблице адресации.
 - c. Назначили cisco в качестве паролей консоли и VTY.
 - d. Назначили class в качестве пароля доступа к привилегированному режиму EXEC.
Закрыли окно настройки.
#
## Часть 2. Изучение таблицы МАС-адресов коммутатора
Как только между сетевыми устройствами начинается передача данных, коммутатор выясняет МАС-адреса и строит таблицу.
### Шаг 1. Запись МАС-адресов сетевых устройств
 - a. Открыли командную строку на PC-A и PC-B и ввели команду ipconfig /all. Получили следующие физические адреса адаптера Ethernet:
#### MAC-адрес компьютера PC-A: 0030.F253.9401
#### MAC-адрес компьютера PC-B: 0001.C950.C8BA
Закрыли окно командной строки.
 - b. Подключились к коммутаторам S1 и S2 через консоль и ввели команду show interface F0/1 на каждом коммутаторе. Открыли окно конфигурации и нашли адреса оборудования во второй строке выходных данных команды (или зашитый адрес — bia):
#### МАС-адрес коммутатора S1 Fast Ethernet 0/1: 0005.5e12.4801
#### МАС-адрес коммутатора S2 Fast Ethernet 0/1: 000d.bd85.9001
Закрыли окно командной строки.
### Шаг 2. Просмотр таблицы МАС-адресов коммутатора
#### Подключились к коммутатору S2 через консоль и просмотрели таблицу МАС-адресов до и после тестирования сетевой связи с помощью эхо-запросов.
 - a. Подключились к коммутатору S2 через консоль и вошли в привилегированный режим EXEC. Открыли окно конфигурации
 - b. В привилегированном режиме EXEC ввели команду show mac address-table и нажали клавишу ввода. Даже если сетевая коммуникация в сети не происходила (т. е. если команда ping не отправлялась), коммутатор может узнать МАС-адреса при подключении к ПК и другим коммутаторам.
#### В таблице МАС-адресов записан только МАС-адрес 0005.5e12.4801 коммутатора S1. Он сопоставлен с портом Fa0/1 коммутатора S2. 
# PHOTO
Таким образом, если не записаны МАС-адреса сетевых устройств в шаге 1, то при помощи команды show mac address-table можно определить, каким устройствам принадлежат МАС-адреса, используя только выходные данные команды show mac address-table. Это решение работает только, если к порту не подключено несколько устройств (или к порту коммутатора не подключен другой коммутатор, к которому подключены другие устройства).

### Шаг 3. Очистка таблицы МАС-адресов коммутатора S2 и повторное отображение таблицы МАС-адресов
 - a. В привилегированном режиме EXEC ввели команду clear mac address-table dynamic и нажали клавишу Enter.
#### S2# clear mac address-table dynamic
 - b. Снова быстро ввели команду show mac address-table.
В таблице МАС-адресов не указаны никакие МАС-адреса. 
- c. Через 10 секунд ввели команду show mac address-table и нажали клавишу ввода. В таблице МАС-адресов не появились новые адреса. В таблице МАС-адресов появились новые адреса только по прошествии бОльшего промежутка времени.
# PHOTO

### Шаг 4. С компьютера PC-B отправили эхо-запросы устройствам в сети и просмотрели таблицу МАС-адресов коммутатора.
 - a. На компьютере PC-B открыли командную строку и снова ввели команду arp -a. Не считая адресов многоадресной и широковещательной рассылки, 0 пар IP- и МАС-адресов устройств было получено через протокол ARP.
# PHOTO
 - b. Из командной строки PC-B отправили эхо-запросы на компьютер PC-A, а также - коммутаторы S1 и S2. Были получены ответы от всех устройств.
# PHOTO 
Закрыли командную строку.
 - c. Подключившись через консоль к коммутатору S2, ввели команду show mac address-table.
#### Открыли окно конфигурации. Коммутатор добавил в таблицу МАС-адресов дополнительные МАС-адреса.
# PHOTO 
На компьютере PC-B открыли командную строку и снова ввели команду arp -a. В ARP-кэше компьютера PC-B появились дополнительные записи (с IP и МАС-адресами) для всех сетевых устройств, которым были отправлены эхо-запросы .
# PHOTO 
Закрыли командную строку.

Таким образом, в сетях Ethernet данные передаются на устройства по соответствующим МАС-адресам. Для этого коммутаторы и компьютеры динамически создают ARP-кэш и таблицы МАС-адресов. Если компьютеров в сети немного, эта процедура выглядит достаточно простой. Но в крупных сетях может возникнуть широковещательный шторм, потому что таблицы ARP и МАС-адресов не проверяют и не аутентифицируют IP-адреса других систем других пользователей. 

> Written with [StackEdit](https://stackedit.io/).

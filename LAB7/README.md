# Лабораторная работа № 7. Развёртывание коммутируемой сети с резервными каналами

![]()

![]()

![]()

## Цели:
### Часть 1. Создание сети и настройка основных параметров устройства
### Часть 2. Выбор корневого моста
### Часть 3. Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов
### Часть 4. Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов
## Общие сведения/сценарий
#### Избыточность позволяет увеличить доступность устройств в топологии сети за счёт устранения единой точки отказа. Избыточность в коммутируемой сети обеспечивается посредством использования нескольких коммутаторов или нескольких каналов между коммутаторами. Когда в проекте сети используется физическая избыточность, возможно возникновение петель и дублирование кадров.
#### Протокол spanning-tree (STP) был разработан как механизм предотвращения возникновения петель на 2-м уровне для избыточных каналов коммутируемой сети. Протокол STP обеспечивает наличие только одного логического пути между всеми узлами назначения в сети путем намеренного блокирования резервных путей, которые могли бы вызвать петлю.
#### В этой лабораторной работе команда show spanning-tree используется для наблюдения за процессом выбора протоколом STP корневого моста. Также мы будем наблюдать за процессом выбора портов с учетом стоимости и приоритета.
#### Примечание. Используются коммутаторы Cisco Catalyst 2960s с Cisco IOS версии 15.0(2) (образ lanbasek9). Допускается использование других моделей коммутаторов и других версий Cisco IOS. В зависимости от модели устройства и версии Cisco IOS доступные команды и результаты их выполнения могут отличаться от тех, которые показаны в лабораторных работах. 
#### Примечание. Убедитесь, что все настройки коммутатора удалены и загрузочная конфигурация отсутствует. Если вы не уверены, обратитесь к инструктору.
## Необходимые ресурсы:
### •	3 коммутатора (Cisco 2960 с операционной системой Cisco IOS 15.0(2) (образ lanbasek9) или аналогичная модель)
### •	Консольные кабели для настройки устройств Cisco IOS через консольные порты
### •	Кабели Ethernet, расположенные в соответствии с топологией
#
### Часть 1. Создание сети и настройка основных параметров устройства
В части 1 нам предстоит настроить топологию сети и основные параметры маршрутизаторов.
#### Шаг 1:	Создание сети согласно топологии.
Подключили устройства, как показано в топологии, и подсоединили необходимые кабели.
#### Шаг 2:	Выполнение инициализации и перезагрузки коммутаторов.
#### Шаг 3:	Настройка базовых параметров каждого коммутатора.
##### a.	Отключили поиск DNS.
##### b.	Присвоили имена устройствам в соответствии с топологией.
##### c.	Назначили class в качестве зашифрованного пароля доступа к привилегированному режиму.
##### d.	Назначили cisco в качестве паролей консоли и VTY и активировали вход для консоли и VTY-каналов.
##### e.	Настроили logging synchronous для консольного канала.
##### f.	Настроили баннерное сообщение дня (MOTD) для предупреждения пользователей о запрете несанкционированного доступа.
##### g.	Задали IP-адреса, указанного в таблице адресации для VLAN 1 на всех коммутаторах.
##### h.	Скопировали текущую конфигурацию в файл загрузочной конфигурации.
#### Шаг 4:	Проверка связи.
Проверили способности компьютеров обмениваться эхо-запросами.
##### Эхо-запрос от коммутатора S1 на коммутатор S2 выполняется Успешно?	______________
##### Эхо-запрос от коммутатора S1 на коммутатор S3 выполняется Успешно?	______________
##### Эхо-запрос от коммутатора S2 на коммутатор S3 выполняется Успешно?	______________
##### Выполняйте отладку до тех пор, пока ответы на все вопросы не будут положительными.
#
### Часть 2. Выбор корневого моста
Для каждого экземпляра протокола spanning-tree (коммутируемая сеть LAN или широковещательный домен) существует коммутатор, выделенный в качестве корневого моста. Корневой мост служит точкой привязки для всех расчётов протокола spanning-tree, позволяя определить избыточные пути, которые следует заблокировать.
#
Процесс выбора определяет, какой из коммутаторов станет корневым мостом. Коммутатор с наименьшим значением идентификатора моста (BID) становится корневым мостом. Идентификатор BID состоит из значения приоритета моста, расширенного идентификатора системы и MAC-адреса коммутатора. Значение приоритета может находиться в диапазоне от 0 до 65535 с шагом 4096. По умолчанию используется значение 32768.
#
##### Шаг 1:	Отключили все порты на коммутаторах.
##### Шаг 2:	Настроили подключенные порты в качестве транковых.
##### Шаг 3:	Включили порты F0/2 и F0/4 на всех коммутаторах.
##### Шаг 4:	Отобразили данные протокола spanning-tree.
Ввели команду show spanning-tree на всех трёх коммутаторах. Приоритет идентификатора моста рассчитывается путём сложения значений приоритета и расширенного идентификатора системы. Расширенным идентификатором системы всегда является номер сети VLAN. В примере ниже все три коммутатора имеют равные значения приоритета идентификатора моста (32769 = 32768 + 1, где приоритет по умолчанию = 32768, номер сети VLAN = 1); следовательно, коммутатор с самым низким значением MAC-адреса становится корневым мостом (в примере — S2).

![]()

![]()

###### Примечание. Режим STP по умолчанию на коммутаторе 2960 — протокол STP для каждой сети VLAN (PVST).
В схему ниже записали роль и состояние (Sts) активных портов на каждом коммутаторе в топологии.

![]()

С учётом выходных данных, поступающих с коммутаторов, выяснили, что
Коммутатор______________ является корневым мостом. 
Этот коммутатор был выбран протоколом spanning-tree в качестве корневого моста, поскольку 
_______________________________________________________________________________________
_______________________________________________________________________________________
Корневыми портами на коммутаторе являются порты ___________________________________
Назначенными портами на коммутаторе являются порты ________________________________
В качестве альтернативного отображается порт____ и он в настоящее время заблокирован.
Протокол spanning-tree выбрал этот порт в качестве невыделенного (заблокированного) порта потому, что?
_______________________________________________________________________________________
_______________________________________________________________________________________
_______________________________________________________________________________________
_______________________________________________________________________________________

### Часть 3. Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов
### Часть 4. Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов
